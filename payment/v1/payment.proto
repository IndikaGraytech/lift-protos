syntax = "proto3";

package lift.payment.v1;

option go_package = "github.com/graytech-lk/lift-protos/gen/go/payment/v1;paymentv1";

import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";

message UserPaymentMethod {
  string id = 1;
  google.protobuf.Timestamp created_time = 2;
  google.protobuf.Timestamp updated_time = 3;
  string user_id = 4;
  string type = 5;
  string name = 6;
  string payment_method = 7;
  bool is_default = 8;
  google.protobuf.Struct extended_parameters = 9;
  int32 status = 10;
}

message GetCorporatePaymentMethodRequest {
  string user_id = 1;
  string corporate_id = 2;
}

message GetCorporatePaymentMethodResponse {
  UserPaymentMethod method = 1;
}

message ListCorporatePaymentMethodsRequest {
  string corporate_id = 1;
  bool include_disabled = 2;
}

message ListCorporatePaymentMethodsResponse {
  repeated UserPaymentMethod methods = 1;
}

message UpdatePaymentMethodStatusRequest {
  string id = 1;
  int32 status = 2;
}

message UpdatePaymentMethodStatusResponse {
  UserPaymentMethod method = 1;
}

message Payment {
  string id = 1;
  string payment_type = 2;
  string user_payment_method = 3;
  string service_request_id = 4;
  double total_amount_after_discount = 5;
  google.protobuf.Timestamp created_time = 6;
}

message ListPaymentsByMethodRequest {
  repeated string payment_method_ids = 1;
  google.protobuf.Timestamp start_time = 2;
  google.protobuf.Timestamp end_time = 3;
}

message ListPaymentsByMethodResponse {
  repeated Payment payments = 1;
}

message GetServiceRequestRequest {
  string service_request_id = 1;
}

message ServiceRequest {
  string id = 1;
  string status = 2;
}

message GetServiceRequestResponse {
  ServiceRequest request = 1;
}

service PaymentMethodService {
  rpc GetCorporatePaymentMethod(GetCorporatePaymentMethodRequest) returns (GetCorporatePaymentMethodResponse);
  rpc ListCorporatePaymentMethods(ListCorporatePaymentMethodsRequest) returns (ListCorporatePaymentMethodsResponse);
  rpc UpdatePaymentMethodStatus(UpdatePaymentMethodStatusRequest) returns (UpdatePaymentMethodStatusResponse);
}

service PaymentService {
  rpc ListPaymentsByMethod(ListPaymentsByMethodRequest) returns (ListPaymentsByMethodResponse);
  rpc GetServiceRequest(GetServiceRequestRequest) returns (GetServiceRequestResponse);
}


